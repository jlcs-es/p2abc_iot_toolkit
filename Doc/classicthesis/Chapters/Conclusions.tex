%************************************************
\chapter{Conclusions and Future Work}\label{ch:conclusions}
%************************************************

To finish this document, we sum up some conclusions from the work done, and results 
obtained. We will also enumerate some future lines of research that could start from
the work done in this project.

\section{Conclusions}

% Resultados son válidos: feseability, problema de tiempo en sistemas de tiempo real
% Se han conseguido objetivos planteados
% Experiencia: qué era más tedioso, dificultades durante diseño y desarrollo
% Primera aproximación de este tipo ~~: más bien somos el future work de...
% Aplicación de procedimientos aprendidos/aplicados durante el TFG/carrera
% ^ Novelty

The designed solution for the integration of Idemix and the Internet of Things provides new possibilities for the IoT security field, mainly in those scenarios where people's data is more vulnerable. However, there is a long path of research before we can see this in production. Many decisions depend on the specific deployment in course, and our solution tries to ease the best it all that future process.

With regards to the designed architecture, the flexibility of the Computation Offloading technique, identifying the key operations that can't be delegated, and those ones that can, allows us to define a general solution for the vast world of the Internet of Things. The IoT devices can operate as individual actors in the Idemix ecosystem. When in need of performing offloading, the delegation server also falls into the IoT class of devices, a great benefit for any real project, having as many options as possible, the solution delivered can be adapted to most of requirements. Nevertheless, being so open to any solution leaves us with a lot of work to do, researching what are the best options, comparing benefits and drawbacks.

Our PoC implementation demonstrates that this project is actually feasible, not by performing a simulation of an IoT device, like in \citep{vanet}. During its development, we had to investigate a lot of concepts related to IoT, smart cards, and even the insides of P2ABCE's code, to fix many existing bugs in the original project and minimize the amount of changes it had to undergo, in order to work with the IoT devices. 

%%%%%%%%%%%

Although there are many other techniques for the delegation server to send commands to the IoT device that knows the secret keys, like RPC


\section{Future work}

% Mejoras PoC
% Mejoras arquitectura: estudiar entornos típicos IoT y definir un despliegue realista usando esta cryptografía
% De \citep{vullers2013efficient} tomar el código de Multos para Idemix "puro". De mi trabajo tomar la adaptación de una tarjeta MULTOS a código de máquina genérica. Perdemos soporte P2ABCE, pero siendo Idemix solo más eficiente.

% Usando la metodología de adaptar una aplicación de multos a otras plataformas, podría portarse la versión de Vullers2013 de Idemix, actualizando la implementación a los cambios de especificación del protocolo.

% Consideraciones futuras: implementar directamente Smartcard interface vs seguir usando APDUs:  minimizan uso de red, facilitan protocolo de comunicación de las APDUs, son estándar, mejoran el mantenimiento del código: P2ABCE puede cambiar las interfaces, pero mantendrá compatibilidad con las smartcards, si implementamos Smartcard.java por cada cambio en la interfaz deberemos actualizar cada IoT smart card.


%Our PoC is tested on a Linux system, and we will give instructions on how to adapt each part to work with other typical IoT systems.
%For example, other IoT devices may work like MULTOS and let access variables in non-volatile memory during execution, and in that case, the port should be changed according to these particularities.

%In the future, more functionality currently delegated in the P2ABCE server can be implemented in the IoT device, if its resources allow it. For example, in a M2M environment, where an IoT device can act as User and Verifier, the verification consists on sending a Presentation Policy, and verifying the Presentation Token, which implies less logic than generating it as the User. Therefore, the implementation of the Verifier functionality would reduce significantly the need of a delegation server, but as we said, managing complex XML squemas is not something many IoT devices could do.



% La reimplementación de multos en el futuro las funciones que usan a MULTOS deberían llamar directamente a las interfaces, dejando pocas funciones como mExit().

%A future change to the project may include support for Extended APDUs, avoiding the use of multiple GET RESPONSE. To do this, the \textit{output\_large\_data} function and the \textit{IoTsmartcardio} implementation of \textit{javax.smartcardio} must support the feature.



% Último objetivo: FIWARE



% Consideraciones futuras: implementar directamente Smartcard interface vs seguir usando APDUs:  minimizan uso de red, facilitan protocolo de comunicación de las APDUs, son estándar, mejoran el mantenimiento del código: P2ABCE puede cambiar las interfaces, pero mantendrá compatibilidad con las smartcards, si implementamos Smartcard.java por cada cambio en la interfaz deberemos actualizar cada IoT smart card.